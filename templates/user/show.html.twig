{% extends 'base.html.twig' %}

{% block title %}User
{% endblock %}
{# 
{% block body %}
	<div class="container-fluid">
		<h1 class="text-ticket-pending">{{user.pseudo}}</h1>
		<div class="card bg-white">
			<div class="card-body">
	
				<div class="container text-center">
					<div class="row justify-content-between">
						<div class="col">
							<div class="text-start" style="width: 215px; height: 312px; border-radius: 75px; overflow: hidden;">
								<img class="img_profil" style="width: 100%; height: 100%; object-fit: cover;" src="{{ asset(user.getImages().first().getPath()) }}" alt="User Image">
							</div>
						</div>

						<div class="col">
							<h2 class="mt-2 mb-4">{{user.fullName}}</h2>
							<h3 class="mt-2 mb-4">{{user.email}}1</h3>
							<h3 class="mt-3 mb-4">discord</h3>
						</div>
						<div class="col text-end">
							<div class="mb-4">
								<a href="{{ path('app_user_edit', {'id': user.id}) }}" class="btn btn-primary" style="width: 219px; height: 67px; border-radius: 15px">
									<div class="text-center">Modifier</div>
								</a>
							</div>

							<form method="post" action="{{ path('app_user_delete', {'id': user.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
								<button type="button col-2" class="btn btn-danger" style="width:219px; height:67px; border-radius:15px">Delete</button>
							</form>
						</div>
					</div>
				</div class="container">
					<h3 class="text-center text-ticket-pending">
						Tickets résolus
					</h3>
					
				<div>

				</div>
			</div>
		</div>
		
	</div>
	
{% endblock %} #}
{% block body %}
	<style>
		h5 {
			color: var(--lighter-purple-color);
		}
		.dot-status {
			width: 15px;
			height: 15px;
			border-radius: 50%;
			display: inline-block;
			margin-right: 10px;
			background-color: var(--new-ticket-color);
		}
		.main-section {
			border: none;
			border-radius: 4px;
		}
		.search-bar {
			border-radius: 4px;
			border: 1px solid #E7E7E7;
			background: #FBFBFB;
		}
		.choice-list {
			padding: 14px 13px 11px 18px;
			border-radius: 4px;
			border: 1px solid #E7E7E7;
		}
		.filter-buttons .btn {
			margin-right: 0.5rem;
		}
		.active-btn {
			color: var(--lighter-purple-color);
			border-bottom: 2px solid var(--lighter-purple-color);
			font-weight: bold;
		}
		.active-status {
			cursor: not-allowed;
			pointer-events: none;

		}
		active-status:hover {
			cursor: not-allowed;
			pointer-events: none;
		}
	</style>

	<div class="container-fluid">
		<h1 class="text-ticket-pending">{{user.pseudo}}</h1>
		<div class="card bg-white main-section">
			<div class="card-body">
				<div class=" ">
					<div class="row justify-content-between">
						<div class="col">
							<div class="text-start" style="width: 215px; height: 312px; border-radius: 75px; overflow: hidden;">
								{% include 'components/user_card.html.twig'  %}
							</div>
						</div>
						<div class="col text-center" >
							<h2 class="mt-2 mb-5">{{user.fullName}}</h2>
							<h3 class="mt-2 mb-4">{{user.email}}1</h3>
							<h3 class="mt-3 mb-4">discord</h3>
						</div>
						<div class="col text-end">
							<div class="mb-4">
								<a href="{{ path('app_user_edit', {'id': user.id}) }}" class="btn btn-first align-items-center" style="width: 219px; height: 67px; border-radius: 15px">
									<div class="text-center">Modifier</div>
								</a>
							</div>

							<form method="post" action="{{ path('app_user_delete', {'id': user.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
								<button type="button col-2" class="btn btn-second" style="width:219px; height:67px; border-radius:15px">Delete</button>
							</form>
						</div>
					</div>
				</divclass="container">
				<h3 class="text-center text-ticket-pending mb-4">
					Tickets résolus
				</h3>

				<div></div>

				{# TICKET #}
				{% for ticket in tickets %}
					<div class="card mb-4 ticket-item {{ ticket.status.slug }}" data-created-at="{{ ticket.createdAt|date('c') }}">
						<div class="card-body">
							<div class="d-flex align-items-center mb-3">
								<span class="rounded-circle dot-status"></span>
								<h5 class="m-0 flex-grow-1">{{ticket.title|slice(0,50)}}
									{% if ticket.title|length > 50 %}...
									{% endif %}
								</h5>
								<span class="fs-6 fw-light">{{ ticket.createdAt|date('Y-m-d H:i') }}</span>
							</div>
							<div class="border-bottom pb-3 mb-3">
								<p>{{ticket.description|slice(0,100)}}
									{% if ticket.description|length > 100 %}...
									{% endif %}
								</p>
							</div>
							<div class="d-flex align-items-center justify-content-between">
								<div class="d-flex align-items-center">
									<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTkq3iQYVKllbdVHi-Lry0cRuKzGMMnWhEFCg&usqp=CAU" alt="John Snow" class="rounded-circle me-2" width="50" height="50">
									<span class="name">{{ticket.user.pseudo}}</span>
								</div>
								<a href="#" class="">Ouvrir le ticket</a>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
	</div>
</div>{% endblock %}
